---
layout:       post
title:        "Reverse1"
author:       "Cheney"
header-style: text
catalog:      true
tags:
   -Reverse
---

通用寄存器 ：AX，BX，CX，DX（AX可分为AH和AL）
变址寄存器：SI，DI
指针寄存器：SP，BP
指令指针寄存器：IP
段寄存器：CS，SS，DS，ES
标志寄存器：PSW
#### 内存读写与地址空间
cpu与内存之间有三条线
cpu先由内部寄存器通过地址线向内存发出物理地址(cpu线宽为n,寻址空间为2的n次方B，因为每个存储单元大小为一字节，所以单位为字节)
再通过控制线发出要进行的操作
再来决定数据线是要传入还是传出（数据总线宽度为n，传输的就为n bit）

----
#### 确定物理地址的方法
al a的低八位
ah a的高八位
8086为16位cpu

运算器一次最多可处理16位数据，寄存器最大宽度也为16位，若在8086内部处理地址，传过去的寻址能力只有64kb
所以可以由两个16位地址合成20位地址 物理地址=段地址×16+偏移地址

#### 内存分段表示法
内存并没有分段，段的划分来自于cpu
段地址×16必然是16倍数，所以段起始地址也一定是16的倍数
偏移地址为16为，16位地址寻址能力为64k，所以一个段的长度最大为64k
表示例如2000:1F60
专门存放段地址的寄存器（4个段寄存器）
ZmxhZ3tyM3YzcmMzX3JjNF8zYXN5X3cxbn0=
CS-代码段寄存器    DS-数据段寄存器
SS-栈段寄存器    ES-附加段寄存器

---
Debug使用
debug 
-r  查看，改变cpu寄存器内容
-d  查看内存内容
-e 改变内存内容
-u 将机器指令翻译为汇编指令
-a 以汇编格式在内存中写入机器指令
-t 执行机器指令

---
#### 内存中字的存储
多少位cpu就按多少位一个字
16位字存储在16位寄存器中，高八位放高字节，低八位放低字节
16位的字在内存中需要两个连续字节存储，低位字节存低地址单元，高位字节存高地址单元
字单元：由两个地址连续的内存单元组成，存放一个字型数据

ds和address实现字的传送
若给ds  mov赋值 ，默认段地址在ds里面，注意只能通过通用寄存器给ds赋值
mov [0],al   [0]代表偏移地址
mov ax,[0] ; 将1000:0处的字型数据（因为要传给ax）送入ax
mov al,[0] ; 传入al的是一个单元里的数据

---
#### 栈
栈段寄存器SS 存放栈顶的段地址
栈顶指针寄存器SP 存放栈顶的偏移地址
push ax  sp=sp-2
pop ax sp=sp+2

----
#### 总结
编程时，可根据需要将一组内存单元定义为一个段
可以将起始地址为16的倍数，长度为N(N<=64k)的一组连续的内存单元定义为一个段
段可完全由程序员安排
数据段：将段地址放在DS中，cpu将里面内容当作数据访问
代码段：将段地址放在CS中，偏移地址为IP
栈段：段地址在SS中，偏移地址在SP中
进行push和pop操作时，可将定义的栈段当作栈空间来使用